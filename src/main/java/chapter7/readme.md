## 并行数据处理

Stream 接口可以让你非常方便地处理它的元素，可以通过对收集源调用 parallelStream 方法来把集合转换为并行流。
并行流就是一个把内容分成多个数据块，并用不同的线程分别处理每个数据块的流。
这样一来，你就可以自动把给定操作的工作负荷分配给多核处理器的所有内核，让它们都忙起来。

有些操作本身在并行流上的性能就比顺序流差。特别是 limit 和 findFirst 等依赖于元素顺序的操作，它们在并行流上执行的代价非常大。
例如，findAny 会比 findFirst 性能好，因为它不一定要按顺序来执行。你总是可以调用unordered方法来把有序流变成无序流。
那么，如果你需要流中的 n 个元素而不是专门要前 n 个的话，对无序并行流调用 limit 可能会比单个有序流（比如数据源是一个 List）更高效。

对于较小的数据量，选择并行流几乎从来都不是一个好的决定。并行处理少数几个元素的好处还抵不上并行化造成的额外开销。

要考虑流背后的数据结构是否易于分解。例如，ArrayList 的拆分效率比 LinkedList 高得多，因为前者用不着遍历就可以平均拆分，而后者则必须遍历。